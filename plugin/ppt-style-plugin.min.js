!(function (e, t) {
  "object" == typeof exports && "undefined" != typeof module
    ? (module.exports = t())
    : "function" == typeof define && define.amd
    ? define(t)
    : ((e =
        "undefined" != typeof globalThis
          ? globalThis
          : e || self).RevealPPTStylePlugin = t());
})(this, function () {
  "use strict";
  return () => ({
    id: "pageLayouts",
    init: (e) => {
      const t = e.getConfig().pageLayoutsPlugin || {},
        o = {
          enabled: !0,
          cover: {
            decoratorShape: null,
            decoratorColor: "black",
            decoratorSize: "1em",
            textAlign: "center",
            decoratorGap: "0.4em",
          },
          section: {
            decoratorShape: "bar",
            decoratorColor: "darkblue",
            decoratorSize: "1em",
            textAlign: "left",
            decoratorGap: "0.3em",
          },
          content: {
            decoratorShape: "square",
            decoratorColor: "red",
            decoratorSize: "0.8em",
            textAlign: "left",
            contentTopOffset: "60px",
            contentLeftOffset: "0px",
            decoratorGap: "0.4em",
          },
        },
        n = {
          ...o,
          ...t,
          cover: { ...o.cover, ...(t.cover || {}) },
          section: { ...o.section, ...(t.section || {}) },
          content: { ...o.content, ...(t.content || {}) },
        };
      if (!n.enabled) return;
      (() => {
        const e = ["h1", "h2", "h3", "h4", "h5", "h6"];
        let t = "";
        ["cover", "section", "content"].forEach((o) => {
          const r = n[o],
            a = `[data-pagetype="${o}"]`;
          if (
            ((t += `${a} { text-align: ${r.textAlign}; }\n`),
            r.decoratorShape && "null" !== r.decoratorShape)
          ) {
            const n = ((e, t) => {
              let o = "";
              switch (e) {
                case "bar":
                  o = `<svg xmlns='http://www.w3.org/2000/svg' width='40' height='100' viewBox='0 0 10 100'><rect width='40' height='100' fill='${t}'/></svg>`;
                  break;
                case "circle":
                  o = `<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='${t}'/></svg>`;
                  break;
                case "star":
                  o = `<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'><polygon points='50,0 61.8,38.2 100,38.2 69.1,61.8 79.4,100 50,76.4 20.6,100 30.9,61.8 0,38.2 38.2,38.2' fill='${t}'/></svg>`;
                  break;
                case "triangle":
                  o = `<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'><polygon points='50,0 100,100 0,100' fill='${t}'/></svg>`;
                  break;
                case "square":
                  o = `<svg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'><rect width='100' height='100' fill='${t}'/></svg>`;
                  break;
                default:
                  return "none";
              }
              return `url("data:image/svg+xml;base64,${btoa(o)}")`;
            })(r.decoratorShape, r.decoratorColor);
            let i = `${a} >`;
            "content" === o && (i = `${a} > .plugin-content-wrapper >`);
            const c = e.map((e) => `${i} ${e.trim()}`).join(",\n"),
              l = e.map((e) => `${i} ${e.trim()}::before`).join(",\n");
            (t += `${c} {\n            position: relative;\n            padding-left: calc(${r.decoratorSize} + ${r.decoratorGap}); \n          }\n`),
              (t += `${l} {\n            content: '';\n            position: absolute;\n            left: 0;\n            top: 50%;\n            transform: translateY(-50%);\n            width: ${r.decoratorSize};\n            height: ${r.decoratorSize};\n            background-image: ${n};\n            background-size: contain;\n            background-repeat: no-repeat;\n            background-position: center;\n          }\n`);
          }
        });
        const o = document.createElement("style");
        (o.id = "page-layouts-plugin-styles"),
          (o.innerHTML = t),
          document.getElementById("page-layouts-plugin-styles")?.remove(),
          document.head.appendChild(o);
      })();
      e.on("ready", () => {
        (() => {
          const t = e
              .getRevealElement()
              .querySelectorAll('[data-pagetype="content"]'),
            o = n.content.contentTopOffset || "0px",
            r = n.content.contentLeftOffset || "0px";
          t.forEach((e) => {
            if (e.querySelector(".plugin-content-wrapper")) return;
            const t = document.createElement("div");
            for (
              t.className = "plugin-content-wrapper",
                Object.assign(t.style, {
                  position: "fixed",
                  top: o,
                  left: r,
                  width: `calc(100% - ${r})`,
                  height: `calc(100% - ${o})`,
                  overflowY: "auto",
                  padding: "0 4%",
                  boxSizing: "border-box",
                });
              e.firstChild;

            )
              t.appendChild(e.firstChild);
            e.appendChild(t);
          });
        })();
      }),
        e.configure({ transition: "none" });
    },
  });
});
